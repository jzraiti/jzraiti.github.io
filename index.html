<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Jason Raiti - Personal Website</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link rel="stylesheet" href="Jasons_HomePage.css">
    <script src="https://use.fontawesome.com/d1341f9b7a.js"></script> 
    <script src="Components/randombackground.js"></script> <!-- Random background script -->
  </head>

  <body>
    <!-- Main content -->
    <div class="box">
      <!-- Portrait Image -->
      <img src="/Assets/Images/Closeup_Transparent.png" alt="Jason Raiti" class="box-img">

      <div class="content-container">
        <!-- Left side: Personal details -->
        <div class="personal-details">
          <h5>Mycologist</h5>
          <h5>Pringle Lab</h5>
          <h5>UW Madison</h5>
          <h5>raiti@wisc.edu</h5>
        </div>
      
        <!-- Right side: iNaturalist observations -->
        <div class="inat-observations">
          <div id="fungi-observations" class="inaturalist-container">
            <ul id="observations-list"></ul>
          </div>
        </div>
      </div>
      
      <!-- Bottom: Social media links -->
      <ul class="social-media-links">
        <li>
          <a href="https://www.linkedin.com/in/jason-raiti" class="fa fa-linkedin-square fa-2x social-media" id="linkedin"></a>
        </li>
        <li>
          <a href="https://github.com/jzraiti" class="fa fa-github fa-2x social-media" id="github"></a>
        </li>
      </ul>
    <script>
      const apiUrl = `https://api.inaturalist.org/v1/observations?taxon_id=47170&per_page=50&order_by=random&random_seed=${Math.random()}`;

      fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
          const observationsList = document.getElementById("observations-list");

          // Create a slide for each observation, excluding "Unknown Species"
          data.results
            .filter(observation => observation.species_guess) // Exclude observations without a species_guess
            .forEach(observation => {
              const listItem = document.createElement("li");
              listItem.className = "observation-slide"; // Add a class for styling and control
              listItem.style.display = "none"; // Initially hide all slides
              listItem.innerHTML = `
                <a href="${observation.uri}" target="_blank">
                  <div class="image-container">
                    <img src="${observation.photos[0]?.url.replace('square', 'large') || ''}" alt="${observation.taxon.name}">
                  </div>
                  <div class="text-container">
                    <p class="common-name">${observation.species_guess}</p>
                    <p class="scientific-name"><em>${observation.taxon.name}</em></p>
                  </div>
                </a>
              `;
              observationsList.appendChild(listItem);
            });

          // Slideshow logic
          let currentIndex = 0;
          const slides = document.getElementsByClassName("observation-slide");

          function showSlide(index) {
            // Hide all slides
            for (let i = 0; i < slides.length; i++) {
              slides[i].style.display = "none";
            }
            // Show the current slide
            slides[index].style.display = "block";
          }

          function startSlideshow() {
            showSlide(currentIndex); // Show the current slide
            currentIndex = (currentIndex + 1) % slides.length; // Move to the next slide
            setInterval(() => {
              showSlide(currentIndex); // Show the current slide
              currentIndex = (currentIndex + 1) % slides.length; // Move to the next slide
            }, 7000); // Change slide every 7 seconds
          }

          if (slides.length > 0) {
            startSlideshow(); // Start the slideshow if there are slides
          }
        })
        .catch(error => console.error("Error fetching iNaturalist data:", error));
    </script>
  </body>
</html>